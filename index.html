<html>

<head>

    <title>jQuery Project</title>

    <script type="text/javascript" src="jquery.js"></script>

    <script src="jqueryUi/jquery-ui.js"></script>

    <link href="jqueryUi/jquery-ui.css" rel="stylesheet">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            font-family: helvetica, sans-serif;
        }

        #toggleBar {
            border-radius: 5px;
            background-color: #dedede;
            height: 50px;
        }

        #toggleBarText {
            padding-left: 10px;
            font-size: 100%;
            bottom: 3px;
            width: 40%;
            float: left;
            position: relative;
        }

        .button {
            margin-top: 5px;
            background-color: #dedede;
            height: 40px;
            border-radius: 7px;
            border-width: 2px;
            float: left;
        }

        .writingDiv {
            float: left;

        }
    </style>

</head>

<body>
    <div id="toggleBar">
        <div id="toggleBarText">
            <span>
                <h3>Code Player</h3>
            </span>
        </div>

        <div id="buttonContainer">

            <button class="button" id="htmlButton">HTML</button>

            <button class="button" id="cssButton">CSS</button>

            <button class="button" id="jsButton">JavaScript</button>

            <button class="button" id="outputButton">Output</button>

        </div>
    </div>

    <div class="writingDiv">

        <div contenteditable="true" class="writingDiv" id="htmlDiv"
            style="background-color: red;border-left: 1px black solid;display: none;">
            <input type="text" id="htmlText">
        </div>

        <div contenteditable="true" class="writingDiv" id="cssDiv"
            style="background-color: blue;border-left: 1px black solid;display: none;">
            <input type="text" id="cssText">
        </div>

        <div contenteditable="true" class="writingDiv" id="jsDiv"
            style="background-color: green;border-left: 1px black solid;display: none;">
            <input type="text" id="jsText">
        </div>

        <div class="writingDiv" id="outputDiv"
            style="background-color: grey;border-left: 1px black solid;display: none;">
        </div>

    </div>

    <script type="text/javascript">

        //I substract 22 pixels due to the right scrollBar
        var windowWidth = window.innerWidth - 22;
        var windowHeight = window.innerHeight;

        /*This flags are going to tell me if a display is working or not, they will change
        whenever I touch a button*/
        var htmlFlag, cssFlag, jsFlag, outputFlag = false;

        /*This array will contain the id's of displayed divs*/
        var activeDisplays = [];

        $(".writingDiv").css("height", windowHeight);
        $("button").button();

        function deactivateDisplay(name) {
            $(name).css("width", 0);
            $(name).css("display", "none");
            eraseElement(name);
        }

        function activateDisplay(name, width) {
            $(name).css("width", width);
            $(name).css("display", "inline-block");
            activeDisplays.push(name);
        }


        //Method that erases an element from the activeDisplaysArray
        function eraseElement(element) {
            const indexElim = activeDisplays.indexOf(element);
            if (indexElim > -1) {
                activeDisplays.splice(indexElim, 1);
            }
        }

        //Funcion que va a fijarse cuantos elementos tiene el array de activeDisplays y en base a eso va a llamar a
        //la funcion activateDisplay de cada elemento con el window/ length del array
        function createView(name) {
            //If no display is active
            if (activeDisplays.length == 0) {
                activateDisplay(name, windowWidth);
            }
            else {
                var actualWidth = windowWidth / (activeDisplays.length + 1);
                for (i = 0; i < activeDisplays.length; i++) {
                    var aux = activeDisplays[i];
                    if (aux != name) {
                        $(aux).css("width", actualWidth);
                    }
                }
                activateDisplay(name, actualWidth);
            }
        }

        function adjustView(name) {
            deactivateDisplay(name);
            //If any display besides the one I deactivate is active now I wanna resize it
            if (activeDisplays.length != 0) {
                var actualWidth = windowWidth / (activeDisplays.length);
                for (i = 0; i < activeDisplays.length; i++) {
                    var aux = activeDisplays[i];
                    if (aux != name) {
                        $(aux).css("width", actualWidth);
                    }
                }
            }
        }

        $("#cssButton").click(function () {
            if (cssFlag) {
                adjustView("#cssDiv")
                cssFlag = false;
            }
            else {
                createView("#cssDiv")
                cssFlag = true;
            }
        })

        $("#htmlButton").click(function () {
            if (htmlFlag) {
                adjustView("#htmlDiv")
                htmlFlag = false;
            }
            else {
                createView("#htmlDiv")
                htmlFlag = true;
            }
        })


        $("#jsButton").click(function () {
            if (jsFlag) {
                adjustView("#jsDiv")
                jsFlag = false;
            }
            else {
                createView("#jsDiv")
                jsFlag = true;
            }
        })

        $("#outputButton").click(function () {
            if (outputFlag) {
                adjustView("#outputDiv")
                outputFlag = false;
            }
            else {
                createView("#outputDiv")
                outputFlag = true;
            }
        })

        $.ajax({
            type: "GET",
            url: 'https://diego-kleinman.github.io/',
            dataType: 'html',
            success: function (data) {
                var x = $(data).find('#htmlText').html()
                console.log(`${x}`);
            }
        });

        // $.get('https://diego-kleinman.github.io/', function (data) {

        //     var htmlContent = $(data).filter('#htmlDiv').html();
        //     var cssContent = $(data).find('#cssDiv').html();
        //     var jsContent = $(data).find('#jsDiv').html();
        //     var aux = $('#outputDiv').load('https://diego-kleinman.github.io/' + ' #htmlDiv');

        //     console.log(`${htmlContent}`);

        //     console.log(`${cssContent}`);

        //     console.log(`${jsContent}`);

        //     console.log(`${aux}`);
        //     //console.log(`${data}`);

        // })

        // $.ajax({
        //     url: 'https://diego-kleinman.github.io/',
        //     type: 'GET',
        //     success: function (data) {

        //         var htmlContent = $(data).find('#htmlDiv').html();
        //         var cssContent = $(data).find('#cssDiv').html();
        //         var jsContent = $(data).find('#jsDiv').html();

        //         console.log(htmlContent);

        //         console.log(cssContent);

        //         console.log(jsContent);
        //         // $.ajax({
        //         //     url: 'output.html',
        //         //     success: function (data) {
        //         //         $(htmlContent).appendTo("body");
        //         //         $(cssContent).appendTo("style");
        //         //         $(jsContent).appendTo("script");

        //         //         $("#outputDiv").html("<iframe src='output.html'></iframe>");

        //         //     }
        //         // })
        //     }
        // });

        // $.ajax({
        //     url: 'cssInput.css',
        //     type: 'SET',
        //     success: function (data) {

        //         var htmlContent = $(data).find('#htmlDiv').html();
        //         var cssContent = $(data).find('#cssDiv').html();
        //         var jsContent = $(data).find('#jsDiv').html();
        //     }
        // });




        //$('#content').html($(data).find('#firstHeading').html());
    </script>
</body>


</html>